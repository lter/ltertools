<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ltertools Vignette • ltertools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ltertools Vignette">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ltertools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/ltertools.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lter/ltertools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>ltertools Vignette</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lter/ltertools/blob/v2.1.0/vignettes/ltertools.Rmd" class="external-link"><code>vignettes/ltertools.Rmd</code></a></small>
      <div class="d-none name"><code>ltertools.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>ltertools</code> package</p>
<p>The goal of <code>ltertools</code> is to centralize the R functions
created by members of the Long Term Ecological Research (LTER)
community. Many of these functions likely have broad relevance that
expands beyond the context of their creation and this package is an
attempt to share those tools and limit the amount of “re-inventing the
wheel” that we each do in our own silos.</p>
<p>The conceptual theme of functions in <code>ltertools</code> is
necessarily broad given the scope of the community we aim to serve. That
said, the identity of this package will likely become more clear as we
accrue contributed functions. This vignette describes the main functions
of <code>ltertools</code> as they currently exist.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># devtools::install_github("lter/ltertools")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lter.github.io/ltertools/">ltertools</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="harmonization">Harmonization<a class="anchor" aria-label="anchor" href="#harmonization"></a>
</h3>
<p>The LTER Network is hypothesis-driven with a focus on long term data
from sites in the network. This results in data that may reasonably be
compared but are–potentially–quite differently formatted based on the
logic of the investigators responsible for each dataset. Data
harmonization (the process of resolving these formatting inconsistencies
to facilitate combination/comparison across projects) is therefore a
significant hurdle for many projects using LTER data. We suggest a
“column key”-based approach that has the potential to <em>greatly</em>
simplify harmonization efforts.</p>
<p>This method requires researchers to develop a 3-column key that
contains (1) the name of each raw data file to be harmonized, (2) the
name of all of the columns in each of those files, and (3) the “tidy
name” that corresponds to each raw column name. Each dataset can then be
read in and have its raw names replaced with the tidy ones specified in
the key. Once this has been done to all files in the specified folder,
they can be combined by their newly consistent column names. A visual
version of this column key approach to harmonization is included for
convenience here:</p>
<p align="center">
<img src="harmonize-workflow.png" alt="Four color-coded tables are in a soft rectangle. One is pulled out and its column names are replaced based on their respective 'tidy names' in the column key table. This is done for each of the other tables then the four tables--with fixed column names--are combined into a single data table" width="100%"></p>
<p>To demonstrate this workflow, we will need to create some example
data tables and export them to a temporary directory (so that they can
be read back in as is required by the harmonization functions).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate two simple tables</span></span>
<span><span class="co">## Dataframe 1</span></span>
<span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"xx"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>                  <span class="st">"unwanted"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"not"</span>, <span class="st">"needed"</span>, <span class="st">"column"</span><span class="op">)</span>,</span>
<span>                  <span class="st">"yy"</span> <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">## Dataframe 2</span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"LETTERS"</span> <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span>,</span>
<span>                  <span class="st">"NUMBERS"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span>,</span>
<span>                  <span class="st">"BONUS"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plantae"</span>, <span class="st">"animalia"</span>, <span class="st">"fungi"</span>, <span class="st">"protista"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate a known temporary folder for exporting</span></span>
<span><span class="va">temp_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export both files to that folder</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">df1</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_folder</span>, <span class="st">"df1.csv"</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">df2</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_folder</span>, <span class="st">"df2.csv"</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>While the raw data must be in a folder, the data key is a dataframe
in R to allow more flexibility on the user’s end about file format /
storage (many LTER working groups like generating their key
collaboratively as a Google Sheet). For this example, we can generate a
data key manually here.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate a key that matches the data we created above</span></span>
<span><span class="va">key_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"source"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"df1.csv"</span>, <span class="fl">3</span><span class="op">)</span>, </span>
<span>                                   <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"df2.csv"</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      <span class="st">"raw_name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xx"</span>, <span class="st">"unwanted"</span>, <span class="st">"yy"</span>,</span>
<span>                                     <span class="st">"LETTERS"</span>, <span class="st">"NUMBERS"</span>, <span class="st">"BONUS"</span><span class="op">)</span>,</span>
<span>                      <span class="st">"tidy_name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"numbers"</span>, <span class="cn">NA</span>, <span class="st">"letters"</span>,</span>
<span>                                      <span class="st">"letters"</span>, <span class="st">"numbers"</span>, <span class="st">"kingdom"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Check that out</span></span>
<span><span class="va">key_obj</span></span>
<span><span class="co">#&gt;    source raw_name tidy_name</span></span>
<span><span class="co">#&gt; 1 df1.csv       xx   numbers</span></span>
<span><span class="co">#&gt; 2 df1.csv unwanted      &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3 df1.csv       yy   letters</span></span>
<span><span class="co">#&gt; 4 df2.csv  LETTERS   letters</span></span>
<span><span class="co">#&gt; 5 df2.csv  NUMBERS   numbers</span></span>
<span><span class="co">#&gt; 6 df2.csv    BONUS   kingdom</span></span></code></pre></div>
<p>With some example files and a key object generated, we can now
demonstrate the actual workflow! The most fundamental of these functions
is <code>harmonize</code>. This function requires the “column key”
described above, as well as the <em>folder</em> containing the raw data
files to which the key refers. Raw data format can also be specified to
any of CSV, TXT, XLS, and/or XLSX. There is a <code>quiet</code>
argument that will silence messages about key-to-data mismatches (either
expected-but-missing column names or unexpected columns).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use the key to harmonize our example data</span></span>
<span><span class="va">harmony</span> <span class="op">&lt;-</span> <span class="fu">ltertools</span><span class="fu">::</span><span class="fu"><a href="../reference/harmonize.html">harmonize</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">key_obj</span>, raw_folder <span class="op">=</span> <span class="va">temp_folder</span>, </span>
<span>                                data_format <span class="op">=</span> <span class="st">"csv"</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the structure of that</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">harmony</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    7 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;  $ source : chr  "df1.csv" "df1.csv" "df1.csv" "df2.csv" ...</span></span>
<span><span class="co">#&gt;  $ numbers: chr  "1" "2" "3" "4" ...</span></span>
<span><span class="co">#&gt;  $ letters: chr  "a" "b" "c" "d" ...</span></span>
<span><span class="co">#&gt;  $ kingdom: chr  NA NA NA "plantae" ...</span></span></code></pre></div>
<p>For users that want help generating the column key, we have created
the <code>begin_key</code> function. This function accepts the raw
folder and data format arguments included in <code>harmonize</code> with
an additional (optional) <code>guess_tidy</code> argument. If
<code>TRUE</code>, that argument attempts to “guess” the desired tidy
name for each raw column name; it does this by standardizing casing and
removing special characters. This may be ideal if you anticipate that
many of your raw data files only differ in casing/special characters
rather than being phrased incompatibly. For our example here we’ll allow
the key to “guess”.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate a column key with "guesses" at tidy column names</span></span>
<span><span class="va">test_key</span> <span class="op">&lt;-</span> <span class="fu">ltertools</span><span class="fu">::</span><span class="fu"><a href="../reference/begin_key.html">begin_key</a></span><span class="op">(</span>raw_folder <span class="op">=</span> <span class="va">temp_folder</span>, data_format <span class="op">=</span> <span class="st">"csv"</span>, </span>
<span>                                 guess_tidy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine what that generated</span></span>
<span><span class="va">test_key</span></span>
<span><span class="co">#&gt;    source raw_name tidy_name</span></span>
<span><span class="co">#&gt; 1 df1.csv       xx        xx</span></span>
<span><span class="co">#&gt; 2 df1.csv unwanted  unwanted</span></span>
<span><span class="co">#&gt; 3 df1.csv       yy        yy</span></span>
<span><span class="co">#&gt; 4 df2.csv  LETTERS   letters</span></span>
<span><span class="co">#&gt; 5 df2.csv  NUMBERS   numbers</span></span>
<span><span class="co">#&gt; 6 df2.csv    BONUS     bonus</span></span></code></pre></div>
<p>Users that have already embraced <code>harmonize</code> may want to
add a ‘batch’ of new raw data files to an existing key. In such cases,
<code>begin_key</code> <em>can</em> work but it is cumbersome to need to
manually sort through for only the new rows to add to your existing
column key. The <code>expand_key</code> function exists to simplify this
process. It creates an output much like that of <code>begin_key</code>
but it only includes rows for data files that are not already in (A) the
existing key object or (B) the harmonized data object.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make another simple 'raw' file</span></span>
<span><span class="va">df3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"xx"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span>,</span>
<span>                  <span class="st">"letters"</span> <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export this locally to the temp folder too</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">df3</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_folder</span>, <span class="st">"df3.csv"</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Identify what needs to be added to the existing column key</span></span>
<span><span class="fu">ltertools</span><span class="fu">::</span><span class="fu"><a href="../reference/expand_key.html">expand_key</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">key_obj</span>, raw_folder <span class="op">=</span> <span class="va">temp_folder</span>, harmonized_df <span class="op">=</span> <span class="va">harmony</span>,</span>
<span>                      data_format <span class="op">=</span> <span class="st">"csv"</span>, guess_tidy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;    source raw_name tidy_name</span></span>
<span><span class="co">#&gt; 1 df3.csv       xx        xx</span></span>
<span><span class="co">#&gt; 2 df3.csv  letters   letters</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wrangling">Wrangling<a class="anchor" aria-label="anchor" href="#wrangling"></a>
</h3>
<p>Sometimes it is convenient to read in all of the data files from a
specified folder. <code>read</code> offers the chance to do just that
and returns a list where the name of each element is the corresponding
file name and the contents of the list element is the full data table.
Users may specify the data format or formats they wish to read in.
Currently, <code>read</code> supports CSV, TXT, XLS, and XLSX files.</p>
<p>We can demonstrate this with the test CSVs we created to demonstrate
the harmonization workflow earlier.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read in all of the CSVs that we created above</span></span>
<span><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu">ltertools</span><span class="fu">::</span><span class="fu"><a href="../reference/read.html">read</a></span><span class="op">(</span>raw_folder <span class="op">=</span> <span class="va">temp_folder</span>, data_format <span class="op">=</span> <span class="st">"csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the structure of that</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">data_list</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ df1.csv:'data.frame': 3 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;   ..$ xx      : int [1:3] 1 2 3</span></span>
<span><span class="co">#&gt;   ..$ unwanted: chr [1:3] "not" "needed" "column"</span></span>
<span><span class="co">#&gt;   ..$ yy      : chr [1:3] "a" "b" "c"</span></span>
<span><span class="co">#&gt;  $ df2.csv:'data.frame': 4 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;   ..$ LETTERS: chr [1:4] "d" "e" "f" "g"</span></span>
<span><span class="co">#&gt;   ..$ NUMBERS: int [1:4] 4 5 6 7</span></span>
<span><span class="co">#&gt;   ..$ BONUS  : chr [1:4] "plantae" "animalia" "fungi" "protista"</span></span>
<span><span class="co">#&gt;  $ df3.csv:'data.frame': 6 obs. of  2 variables:</span></span>
<span><span class="co">#&gt;   ..$ xx     : int [1:6] 10 11 12 13 14 15</span></span>
<span><span class="co">#&gt;   ..$ letters: chr [1:6] "j" "k" "l" "m" ...</span></span></code></pre></div>
<p>On a different note, the <code>solar_day_info</code> function allows
you to identify the time of sunrise, sunset, and solar noon (as well as
the total length of the day) for each day between a specified start and
end date at a set of latitude/longitude coordinates. All times are in
UTC and the information retrieved is returned as a dataframe.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Identify day information in Santa Barbara (California) for one week</span></span>
<span><span class="fu"><a href="../reference/solar_day_info.html">solar_day_info</a></span><span class="op">(</span>lat <span class="op">=</span> <span class="fl">34.41</span>, lon <span class="op">=</span> <span class="op">-</span><span class="fl">119.71</span>, </span>
<span>               start_date <span class="op">=</span> <span class="st">"2022-02-07"</span>, end_date <span class="op">=</span> <span class="st">"2022-02-12"</span>, </span>
<span>               quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;         date    sunrise     sunset solar_noon day_length time_zone</span></span>
<span><span class="co">#&gt; 1 2022-02-07 2:49:59 PM 1:35:56 AM 8:12:57 PM   10:45:57       UTC</span></span>
<span><span class="co">#&gt; 2 2022-02-08 2:49:05 PM 1:36:54 AM 8:13:00 PM   10:47:49       UTC</span></span>
<span><span class="co">#&gt; 3 2022-02-09 2:48:10 PM 1:37:52 AM 8:13:01 PM   10:49:42       UTC</span></span>
<span><span class="co">#&gt; 4 2022-02-10 2:47:14 PM 1:38:50 AM 8:13:02 PM   10:51:36       UTC</span></span>
<span><span class="co">#&gt; 5 2022-02-11 2:46:16 PM 1:39:48 AM 8:13:02 PM   10:53:32       UTC</span></span>
<span><span class="co">#&gt; 6 2022-02-12 2:45:17 PM 1:40:45 AM 8:13:01 PM   10:55:28       UTC</span></span></code></pre></div>
<p>Much of the synthesis work with LTER data–and indeed many ecological
research projects generally–requires quantification of
<em>variation</em>. To that end, we’ve written a function that simply
calculates the coefficient of variation (standard deviation divided by
mean) for a vector of numbers. Because <code>sd</code> and
<code>mean</code> both support an argument for defining how missing
values are handled, our <code>cv</code> function does as well.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate CV (excluding missing values)</span></span>
<span><span class="fu">ltertools</span><span class="fu">::</span><span class="fu"><a href="../reference/cv.html">cv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>, na_rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.1557461</span></span></code></pre></div>
<p>We also included a simple function for converting temperature values
(<code>convert_temp</code>) among different accepted units. Simply
specify the values to convert, their current units, and the units to
which you would like to convert and the function will perform the needed
arithmetic. Units are case-insensitive and support either the one-letter
abbreviation or the full name of the unit.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert some temperatures from F to Kelvin</span></span>
<span><span class="fu"><a href="../reference/convert_temp.html">convert_temp</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">32</span>, <span class="fl">110</span><span class="op">)</span>, from <span class="op">=</span> <span class="st">"Fahrenheit"</span>, to <span class="op">=</span> <span class="st">"k"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 255.3722 273.1500 316.4833</span></span></code></pre></div>
<p>Note that we chose this function’s naming convention in part to allow
for an ecosystem of related ‘unit conversion’ functions that may prove
worthwhile to develop.</p>
</div>
<div class="section level3">
<h3 id="lter-information">LTER Information<a class="anchor" aria-label="anchor" href="#lter-information"></a>
</h3>
<p>The LTER Network is composed of many separate sites. While all of
these sites are “long term” they do vary slightly in when they were
created. For those interested in knowing the temporal coverage of data
from a particular site or group of sites, <code>site_timeline</code> can
prove a helpful function. This function creates a <code>ggplot2</code>
timeline where sites are on the vertical axis and years are on the
horizontal. Lines are colored based on the habitat of the site and there
is support for a user-defined set of hexadecimal colors though by
default an internal palette is used.</p>
<p>Sites can be specified by their three letter site code or all sites
in a particular habitat can be included.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check the timeline for all grassland or forest LTER sites</span></span>
<span><span class="fu">ltertools</span><span class="fu">::</span><span class="fu"><a href="../reference/site_timeline.html">site_timeline</a></span><span class="op">(</span>habitats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grassland"</span>, <span class="st">"forest"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ltertools_files/figure-html/site-timeline-1-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Running the function without specifying site codes or habitat types
will result in a timeline of all active LTER sites.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check the timeline for all LTER sites</span></span>
<span><span class="fu">ltertools</span><span class="fu">::</span><span class="fu"><a href="../reference/site_timeline.html">site_timeline</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ltertools_files/figure-html/site-timeline-2-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Lyon, Angel Chen, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
